# プロジェクト共通コーディングルール

## 技術スタック

- **フレームワーク**: Next.js (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **アニメーション**: CSS のみ（JavaScript アニメーションライブラリは使用しない）

## ディレクトリ構成

```
project/
├── app/                    # App Router のページ
│   ├── (main)/            # メインサイト
│   └── (admin)/           # 管理画面
├── components/            # 共通コンポーネント
│   ├── header/           # ヘッダー
│   ├── footer/           # フッター
│   ├── lowerkv/          # 下層ページKV
│   ├── top/              # トップページ専用
│   ├── about/            # Aboutページ専用
│   ├── service/          # サービスページ専用
│   └── ui/               # 汎用UIコンポーネント
├── public/               # 静的ファイル
└── lib/                  # ユーティリティ
```

**注意**: `src/` ディレクトリは使用しない

## Figma コーディングの標準ルール

### 進め方

1. **Figma MCP** でデザインを取得してコーディング
2. トップページ（または指定セクション）から実装を開始
3. セクションごとにレビューを受ける
4. セクションが完了するまで都度承認は不要

### コンポーネント運用

- **既存コンポーネントを優先**: page に設定されているコンポーネントを利用・改変する
- **新規ファイル作成禁止**: 既存ファイルを編集して対応
- **ファイル名変更禁止**: コンポーネント内のファイル名は変更しない
- **判断コメント**: 実装しづらい箇所はコメントで判断理由を記載

```tsx
{/* NOTE: Figmaでは3カラムだが、コンテンツ量を考慮して2カラムに変更 */}
```

## レイアウト規約

### レスポンシブ設計

- **モバイルファースト**: 基本スタイルは SP 向け
- **リキッドレイアウト**: 固定幅ではなく流動的なレイアウト
- **ブレイクポイント**: `lg:` の1箇所のみ（1024px）

```tsx
// Good
<div className="flex flex-col lg:flex-row">

// Bad（複数ブレイクポイント）
<div className="flex flex-col md:flex-row lg:flex-row">
```

### コンテンツ幅

- **PC**: `max-w-[1200px]` 固定（画面いっぱいのデザインは除く）
- **共通パターン**:

```tsx
<div className="lg:max-w-[1200px] mx-auto px-5">
  {/* コンテンツ */}
</div>
```

### SP 対応

- 横並び → 縦並びなど適宜調整
- タッチターゲットは最小 44px 確保

## コーディング規約

### 画像

- Next.js の `Image` コンポーネントを使用
- CSS の `background-image` は使用しない

```tsx
// Good
<Image src="/path/to/image.jpg" alt="説明" fill className="object-cover" />

// Bad
<div style={{ backgroundImage: 'url(/path/to/image.jpg)' }} />
```

### クラス名

- Tailwind CSS のユーティリティクラスを使用
- カスタムクラスは最小限に

### コンポーネント

- `"use client"` は必要な場合のみ
- Props は TypeScript で型定義

## レビュー規約

各セクション完了時に以下の観点でセルフチェックを行い、問題があれば修正してからレビュー依頼すること。

### 1. アクセシビリティ

- [ ] セマンティックな HTML 要素を使用しているか
- [ ] 適切な aria-* 属性が付与されているか
- [ ] 画像に alt 属性があるか
- [ ] フォーカス管理は適切か

### 2. パフォーマンス

- [ ] 不要な `"use client"` がないか
- [ ] 画像は `next/image` を使用しているか
- [ ] 適切なコンポーネント分割か

### 3. コード品質

- [ ] TypeScript の型定義は適切か
- [ ] 命名規則は一貫しているか
- [ ] 重複コードはないか
- [ ] コメントは必要な箇所に記載されているか

### 4. レイアウト規約の遵守

- [ ] モバイルファーストになっているか
- [ ] ブレイクポイントは `lg:` のみか
- [ ] コンテンツ幅は `max-w-[1200px]` か

### 5. セルフチェック完了後

- 問題点があれば修正
- 修正が難しい場合はコメントで理由を記載
- チェック完了後にレビュー依頼
